<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 2.2">

    <!-- Primary Meta Tags -->
    <title>Install Multiple Version of PHP on same server</title>
    <meta name="title" content="Install Multiple Version of PHP on same server">
    <meta name="description" content="Remove all versions of php, Make sure to back up any configuration files." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="/phpmulti/">
    <meta property="og:title" content="Install Multiple Version of PHP on same server">
    <meta property="og:description" content="Remove all versions of php, Make sure to back up any configuration files.">
    <meta property="og:image" content="https://assets.digitalocean.com/articles/67125/php74.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="/phpmulti/">
    <meta property="twitter:title" content="Install Multiple Version of PHP on same server">
    <meta property="twitter:description" content="Remove all versions of php, Make sure to back up any configuration files.">
    <meta property="twitter:image" content="https://assets.digitalocean.com/articles/67125/php74.png">

    <script>(function () { var el = document.documentElement, m = "dark", wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="/resources/css/retype.css?v=2.2.710270871754" rel="stylesheet" data-turbo-track="reload" />

    <script type="text/javascript" src="/resources/js/config.js?v=2.2.710270871754" defer data-turbo-track="reload"></script>
    <script type="text/javascript" src="/resources/js/retype.js?v=2.2" defer data-turbo-track="reload"></script>
    <script id="lunr-js" type="text/javascript" src="/resources/js/lunr.js?v=2.2.710270871754" defer></script>
    <script id="prism-js" type="text/javascript" src="/resources/js/prism.js?v=2.2.710270871754" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between grow pr-6 md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="/" class="flex items-center leading-snug text-2xl">
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">Project Name</span>
                        </a>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
        
                            <input class="w-full h-10 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 placeholder-gray-400 dark:placeholder-dark-400"
                            style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search" />
                        </div>
        
                        <!-- Mobile search button mock -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placehokder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button mock -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter" />
                </div>
            
                <div class="pl-6 mb-4 mt-1">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="grow min-w-0 px-6 md:px-16">
                        <main class="relative pt-6 pb-16">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                
                                <!-- Page content  -->
<doc-anchor-target id="install-multiple-version-of-php-on-same-server" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#install-multiple-version-of-php-on-same-server">#</doc-anchor-trigger>
        <span>Install Multiple Version of PHP on same server</span>
    </h1>
</doc-anchor-target>
<div class="-mt-3 mb-12 flex flex-wrap text-sm text-gray-400 dark:text-dark-350">
    <div class="flex items-center">
        <div>By</div>
        <div class="ml-2 flex items-center">
          <div class="shrink-0 w-8 h-8 overflow-hidden rounded-full">
            <a href="https://blog.cronje.me"><img class="object-cover" src="https://assets.cronje.me/avatars/darker.jpg"/></a>
          </div>
          <div class="ml-1 whitespace-nowrap text-gray-500 dark:text-dark-350"><a href="https://blog.cronje.me">Charl Cronje</a></div>
        </div>
    </div>
</div>

<script type="text/javascript">(function(w,s){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src="https://cdn.pagesense.io/js/webally/f2527eebee974243853bcd47b32631f4.js";var x=document.getElementsByTagName("script")[0];x.parentNode.insertBefore(e,x);})(window,"script");</script>
<doc-anchor-target id="prerequisites">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#prerequisites">#</doc-anchor-trigger>
        <span>Prerequisites</span>
    </h2>
</doc-anchor-target>
<p>Remove all versions of php, Make sure to back up any configuration files.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">dnf remove php php-fpm -y</code></pre>
</doc-codeblock></div>
<p>Then remove the rest of the package extensions.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf remove php* -y</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="step-1--installing-php-versions-74-and-81-with-php-fpm">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1--installing-php-versions-74-and-81-with-php-fpm">#</doc-anchor-trigger>
        <span>Step 1 — Installing PHP Versions 7.4 and 8.1 with PHP-FPM</span>
    </h2>
</doc-anchor-target>
<p>With the prerequisites completed, you will now install PHP versions 7.4 and 8.1, as well as PHP-FPM and several additional extensions. In order to install multiple versions of PHP, you will need to install and enable the Remi repository to your system. Which also offers the latest versions of the PHP stack on CentOS 8 system.</p>
<p>You can add the both repository to your system using the below commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf install http://rpms.remirepo.net/enterprise/remi-release-8.rpm
</code></pre>
</doc-codeblock></div>
<p>Copy</p>
<p>The command above will also enable the EPEL repository.</p>
<p>First let’s discover what versions of PHP 7 are available on Remi:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf module list php</code></pre>
</doc-codeblock></div>
<p>Copy</p>
<p>You’ll see an output like this:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">OutputRemi's Modular repository for Enterprise Linux 8 - x86_64
Name                     Stream                       Profiles                                       Summary                                   
php                      remi-7.2                     common [d], devel, minimal                     PHP scripting language                    
php                      remi-7.4                     common [d], devel, minimal                     PHP scripting language                    
php                      remi-8.1                     common [d], devel, minimal                     PHP scripting language                    </code></pre>
</doc-codeblock></div>
<p>Next, disable the default PHP module and enable Remi’s PHP7.4 module using the below command:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf module reset php
sudo dnf module enable php:remi-7.4</code></pre>
</doc-codeblock></div>
<p>Lets start to installing <code v-pre>php74</code> and <code v-pre>php74-php-fpm</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf install php74 php74-php-fpm -y</code></pre>
</doc-codeblock></div>
<p>Install most uses extensions</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf install php-cli php-fpm php-curl php-mysqlnd php-gd php-opcache php-zip php-intl php-common php-bcmath php-imap php-imagick php-xmlrpc php-json php-readline php-memcached php-redis php-mbstring php-apcu php-xml</code></pre>
</doc-codeblock></div>
<ul>
<li><code v-pre>php74</code> is a metapackage that can be used to run PHP application.</li>
<li><code v-pre>php74-php-fpm</code> provides the Fast Process Manager interpreter that runs as a daemon and receives Fast/CGI requests.</li>
</ul>
<p>Now repeat the process for PHP version 8.1. Install <code v-pre>php81</code> and <code v-pre>php81-php-fpm</code>.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo dnf module reset php
sudo dnf module enable php:remi-8.1
sudo dnf install php81 php81-php-fpm -y
</code></pre>
</doc-codeblock></div>
<p>Install most uses extensions</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">sudo dnf install php-cli php-fpm php-curl php-mysqlnd php-gd php-opcache php-zip php-intl php-common php-bcmath php-imap php-imagick php-xmlrpc php-json php-readline php-memcached php-redis php-mbstring php-apcu php-xml</code></pre>
</doc-codeblock></div>
<p>After installing both PHP versions, start the <code v-pre>php74-php-fpm</code> service and enable it to start at boot with the following commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo systemctl start php74-php-fpm
sudo systemctl enable php74-php-fpm
</code></pre>
</doc-codeblock></div>
<p>Copy</p>
<p>Next, verify the status of <code v-pre>php74-php-fpm</code> service with the following commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo systemctl status php74-php-fpm
</code></pre>
</doc-codeblock></div>
<p>Copy</p>
<p>You’ll see the following output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">● php74-php-fpm.service - The PHP FastCGI Process Manager
   Loaded: loaded (/usr/lib/systemd/system/php74-php-fpm.service; enabled; vendor preset: disabled)
   Active: active (running) since Wed 2020-04-22 05:14:46 UTC; 52s ago
 Main PID: 14206 (php-fpm)
   Status: &quot;Processes active: 0, idle: 5, Requests: 0, slow: 0, Traffic: 0req/sec&quot;
    Tasks: 6 (limit: 5059)
   Memory: 25.9M
   CGroup: /system.slice/php74-php-fpm.service
           ├─14206 php-fpm: master process (/etc/opt/remi/php74/php-fpm.conf)
           ├─14207 php-fpm: pool www
           ├─14208 php-fpm: pool www
           ├─14209 php-fpm: pool www
           ├─14210 php-fpm: pool www
           └─14211 php-fpm: pool www

Apr 22 05:14:46 centos-s-1vcpu-1gb-nyc3-01 systemd[1]: Starting The PHP FastCGI Process Manager...
Apr 22 05:14:46 centos-s-1vcpu-1gb-nyc3-01 systemd[1]: Started The PHP FastCGI Process Manager.</code></pre>
</doc-codeblock></div>
<p>Repeating this process, now start the <code v-pre>php81-php-fpm</code> service and enable it to start at boot with the following commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo systemctl start php81-php-fpm
sudo systemctl enable php81-php-fpm</code></pre>
</doc-codeblock></div>
<p>And then verify the status of <code v-pre>php81-php-fpm</code> service with the following commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo systemctl status php81-php-fpm</code></pre>
</doc-codeblock></div>
<p>You’ll see the following output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">● php81-php-fpm.service - The PHP FastCGI Process Manager
   Loaded: loaded (/usr/lib/systemd/system/php81-php-fpm.service; enabled; vendor preset: disabled)
   Active: active (running) since Wed 2020-04-22 05:16:16 UTC; 23s ago
 Main PID: 14244 (php-fpm)
   Status: &quot;Processes active: 0, idle: 5, Requests: 0, slow: 0, Traffic: 0req/sec&quot;
    Tasks: 6 (limit: 5059)
   Memory: 18.8M
   CGroup: /system.slice/php81-php-fpm.service
           ├─14244 php-fpm: master process (/etc/opt/remi/php81/php-fpm.conf)
           ├─14245 php-fpm: pool www
           ├─14246 php-fpm: pool www
           ├─14247 php-fpm: pool www
           ├─14248 php-fpm: pool www
           └─14249 php-fpm: pool www

Apr 22 05:16:15 centos-s-1vcpu-1gb-nyc3-01 systemd[1]: Starting The PHP FastCGI Process Manager...
Apr 22 05:16:16 centos-s-1vcpu-1gb-nyc3-01 systemd[1]: Started The PHP FastCGI Process Manager.
</code></pre>
</doc-codeblock></div>
<p>At this point you have installed two PHP versions on your server. Next, you will create a directory structure for each website you want to deploy.</p>
<doc-anchor-target id="step-2--creating-directory-structures-for-both-websites">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2--creating-directory-structures-for-both-websites">#</doc-anchor-trigger>
        <span>Step 2 — Creating Directory Structures for Both Websites</span>
    </h2>
</doc-anchor-target>
<p>In this section, you will create a document root directory and an index page for each of your two websites.</p>
<p>First, create document root directories for both site1.your_domain and site2.your_domain:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo mkdir /var/www/site1.your_domain
sudo mkdir /var/www/site2.your_domain
</code></pre>
</doc-codeblock></div>
<p>By default, Apache webserver runs as a apache user and apache group. To ensure that you have the correct ownership and permissions of your website root directories, execute the following commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo chown -R apache:apache /var/www/site1.your_domain
sudo chown -R apache:apache /var/www/site2.your_domain
sudo chmod -R 755 /var/www/site1.your_domain
sudo chmod -R 755 /var/www/site2.your_domain
</code></pre>
</doc-codeblock></div>
<p>The <code v-pre>chown</code> command changes the ownership of your two website directories to the <code v-pre>apache</code> user and the <code v-pre>apache</code> group. The <code v-pre>chmod</code> command changes the permissions associated with that user and group, as well as others.</p>
<p>Next you will create an <code v-pre>info.php</code> file inside each website root directory. This will display each website’s PHP version information. Begin with site1:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo vi /var/www/site1.your_domain/info.php
</code></pre>
</doc-codeblock></div>
<p>Add the following line:</p>
<p>/var/www/&lt;<sup>&gt;site1.your_domain&lt;</sup>&gt;/info.php</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">&lt;?php phpinfo(); ?&gt;</code></pre>
</doc-codeblock></div>
<p>Save and close the file. Now copy the info.php file you created to site2:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo cp /var/www/site1.your_domain/info.php /var/www/site2.your_domain/info.php</code></pre>
</doc-codeblock></div>
<p>Your web server now has the document root directories that each site requires to serve data to visitors. Next, you will configure your Apache web server to work with two different PHP versions.</p>
<doc-anchor-target id="step-3--configuring-apache-for-both-websites">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-3--configuring-apache-for-both-websites">#</doc-anchor-trigger>
        <span>Step 3 — Configuring Apache for Both Websites</span>
    </h2>
</doc-anchor-target>
<p>In this section, you will create two virtual host configuration files. This will enable your two websites to work simultaneously with two different PHP versions.</p>
<p>In order for Apache to serve this content, it is necessary to create a virtual host file with the correct directives. You’ll create two new virtual host configuration file inside the directory <code v-pre>/etc/httpd/conf.d/</code>.</p>
<p>First create a new virtual host configuration file for the website site1.your_domain. Here you will direct Apache to render content using <code v-pre>php7.4</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo vi /etc/httpd/conf.d/site1.your_domain.conf</code></pre>
</doc-codeblock></div>
<p>Add the following content. Make sure the website directory path, server name, and PHP version match your setup:</p>
<p>/etc/httpd/conf.d/site1.your_domain.conf</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">&lt;VirtualHost *:80&gt;
     ServerAdmin admin@site1.your_domain
     ServerName site1.your_domain
     DocumentRoot /var/www/site1.your_domain
     DirectoryIndex info.php
     ErrorLog /var/log/httpd/site1.your_domain-error.log
     CustomLog /var/log/httpd/site1.your_domain-access.log combined

  &lt;IfModule !mod_php7.c&gt;
    &lt;FilesMatch \.(php|phar)$&gt;
        SetHandler &quot;proxy:unix:/var/opt/remi/php74/run/php-fpm/www.sock|fcgi://localhost&quot;
    &lt;/FilesMatch&gt;
  &lt;/IfModule&gt;

&lt;/VirtualHost&gt;</code></pre>
</doc-codeblock></div>
<p>For <code v-pre>DocumentRoot</code> you are specifying the path of your website root directory. For <code v-pre>ServerAdmin</code> you are adding an email that the <code v-pre>your_domain</code> site administrator can access. For <code v-pre>ServerName</code> you are adding the url for your first subdomain. For SetHandler you are specifying the PHP-FPM socket file for php7.4.</p>
<p>Save and close the file.</p>
<p>Next, create a new virtual host configuration file for the website site2.your_domain. You will specify this subdomain to deploy <code v-pre>php8.1</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo vi /etc/httpd/conf.d/site2.your_domain.conf</code></pre>
</doc-codeblock></div>
<p>Copy</p>
<p>Add the following content. Again, make sure the website directory path, server name, and PHP version match your unique information:</p>
<p>/etc/httpd/conf.d/site2.your_domain.conf</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">&lt;VirtualHost *:80&gt;
     ServerAdmin admin@site2.your_domain
     ServerName site2.your_domain
     DocumentRoot /var/www/site2.your_domain
     DirectoryIndex info.php
     ErrorLog /var/log/httpd/site2.your_domain-error.log
     CustomLog /var/log/httpd/site2.your_domain-access.log combined
  &lt;IfModule !mod_php7.c&gt;
    &lt;FilesMatch \.(php|phar)$&gt;
        SetHandler &quot;proxy:unix:/var/opt/remi/php81/run/php-fpm/www.sock|fcgi://localhost&quot;
    &lt;/FilesMatch&gt;
  &lt;/IfModule&gt;

&lt;/VirtualHost&gt;</code></pre>
</doc-codeblock></div>
<p>Save and close the file when you are finished. Then, check the Apache configuration file for any syntax errors with the following command:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo apachectl configtest</code></pre>
</doc-codeblock></div>
<p>You’ll see an output printing <code v-pre>Syntax OK</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">OutputSyntax OK</code></pre>
</doc-codeblock></div>
<p>Finally, restart the Apache service to implement your changes:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo systemctl restart httpd</code></pre>
</doc-codeblock></div>
<p>Now that you have configured Apache to serve each site, you will test them to make sure the proper PHP versions are running.</p>
<doc-anchor-target id="step-4--testing-both-websites">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-4--testing-both-websites">#</doc-anchor-trigger>
        <span>Step 4 — Testing Both Websites</span>
    </h2>
</doc-anchor-target>
<p>At this point, you have configured two websites to run two different versions of PHP. Now test the results.</p>
<p>Open your web browser and visit both sites <code v-pre>http://site1.your_domain</code> and <code v-pre>http://site2.your_domain</code>. You will see two pages that look like this:</p>
<p><img src="https://assets.digitalocean.com/articles/67125/php74.png" alt="PHP 7.4 info page" /> <img src="https://assets.digitalocean.com/articles/67125/php81.png" alt="PHP 8.1 info page" /></p>
<p>Note the titles. The first page indicates that site1.your_domain deployed PHP version 7.4. The second indicates that site2.your_domain deployed PHP version 8.1.</p>
<p>Now that you’ve tested your sites, remove the <code v-pre>info.php</code> files. Because they contain sensitive information about your server and are accessible to unauthorized users, they pose a security vulnerability. To remove both files, run the following commands:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sudo rm -rf /var/www/site1.your_domain/info.php
sudo rm -rf /var/www/site2.your_domain/info.php
</code></pre>
</doc-codeblock></div>
<p>You now have a single CentOS 8 server handling two websites with two different PHP versions. PHP-FPM, however, is not limited to this one application.</p>
<p>There are still a few things that could have gone wrong during the setup that I did not all handle in these docs, but here are some links if you get stuck:</p>
<ul>
<li><a href="https://www.linuxcapable.com/how-to-install-php-8-1-on-centos-8-stream/">https://www.linuxcapable.com/how-to-install-php-8-1-on-centos-8-stream/</a></li>
<li><a href="https://stackoverflow.com/questions/63080021/php-installation-error-it-is-not-possible-to-switch-enabled-streams-of-a-modul">https://stackoverflow.com/questions/63080021/php-installation-error-it-is-not-possible-to-switch-enabled-streams-of-a-modul</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-run-multiple-php-versions-on-one-server-using-apache-and-php-fpm-on-centos-7">https://www.digitalocean.com/community/tutorials/how-to-run-multiple-php-versions-on-one-server-using-apache-and-php-fpm-on-centos-7</a></li>
<li><a href="https://stackoverflow.com/questions/66043552/make-php7-and-php-8-live-together">https://stackoverflow.com/questions/66043552/make-php7-and-php-8-live-together</a></li>
</ul>
<doc-anchor-target id="conclusion">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#conclusion">#</doc-anchor-trigger>
        <span>Conclusion</span>
    </h2>
</doc-anchor-target>
<p>You have now combined virtual hosts and PHP-FPM to serve multiple websites and multiple versions of PHP on a single server. The only practical limit on the number of PHP sites and PHP versions that your Apache service can handle is the processing power of your instance.</p>
<p>From here you might consider <a href="https://php-fpm.org/about/">exploring PHP-FPM’s more advanced features</a>, like its adaptive spawning process or how it can log <code v-pre>sdtout</code> and <code v-pre>stderr</code>. Alternatively, you could now secure your websites with free TLS/SSL certificates from Let’s Encrypt.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results />
                            </div>
                            <footer class="clear-both">
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="/vault/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">Server & Software Setup</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="/webdav/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">Server & Software Setup</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script>window.__DOCS__ = { "title": "Server & Software Setup", icon: "file", hasPrism: true, hasMermaid: false, hasMath: false }</script>
</body>
</html>
